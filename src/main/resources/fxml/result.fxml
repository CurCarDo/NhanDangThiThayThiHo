<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<StackPane xmlns="http://javafx.com/javafx/21.0.1"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.faceproctoring.controller.ResultController"
           prefHeight="800" prefWidth="1200"
           style="-fx-background-color: #f3f8fe;">

    <children>
        <ScrollPane fitToWidth="true" pannable="true" vbarPolicy="AS_NEEDED" hbarPolicy="NEVER"
                    style="-fx-background-color: transparent;">
            <content>
                <VBox alignment="TOP_CENTER" spacing="32">
                    <padding>
                        <Insets bottom="32" left="32" right="32" top="32" />
                    </padding>

                    <!-- Header -->
                    <HBox alignment="CENTER_LEFT" spacing="12">
                        <ImageView fitHeight="48" fitWidth="48" preserveRatio="true">
                            <image><Image url="@/images/huit-logo.png" /></image>
                        </ImageView>
                        <VBox alignment="TOP_LEFT" spacing="2">
                            <Label style="-fx-text-fill: #1976d2; -fx-font-size: 26; -fx-font-weight: bold;"
                                text="Káº¿t Quáº£ XÃ¡c Thá»±c" />
                            <Label style="-fx-text-fill: #222; -fx-font-size: 16;"
                                text="Há»‡ thá»‘ng nháº­n diá»‡n khuÃ´n máº·t" />
                        </VBox>
                    </HBox>

                    <!-- Main Card -->
                    <StackPane maxWidth="600"
                               style="-fx-background-color: white; -fx-background-radius: 18;
                                      -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.08), 12, 0, 0, 4);">
                        <VBox alignment="CENTER" spacing="24">
                            <padding>
                                <Insets bottom="32" left="32" right="32" top="32" />
                            </padding>

                            <!-- Captured Photo -->
                            <ImageView fx:id="imgCaptured" fitHeight="200" fitWidth="200" preserveRatio="true"
                                    style="-fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.15), 8, 0, 0, 2);
                                            -fx-background-radius: 12;">
                                <image><Image url="@/images/student.png" /></image>
                            </ImageView>

                            <!-- âœ… Java verification conclusion -->
                            <Label fx:id="lblVerificationWarning"
                                visible="false"
                                wrapText="true"
                                maxWidth="520"
                                textAlignment="CENTER"
                                style="-fx-background-color: #ffebee; -fx-text-fill: #c62828;
                                        -fx-padding: 15; -fx-background-radius: 8;
                                        -fx-font-weight: bold; -fx-font-size: 16px;
                                        -fx-border-color: #c62828; -fx-border-width: 2;
                                        -fx-border-radius: 8;"
                                text="âš ï¸ Cáº¢NH BÃO: KhuÃ´n máº·t khÃ´ng khá»›p vá»›i sinh viÃªn Ä‘Ã£ Ä‘Äƒng nháº­p!" />

                            <!-- âš ï¸ Flask minor warnings -->
                            <Label fx:id="lblWarning"
                                text=""
                                wrapText="true"
                                style="-fx-font-size: 15px; -fx-text-fill: orange;
                                        -fx-padding: 10; -fx-font-style: italic;"
                                alignment="CENTER"
                                prefWidth="500" />

                            <Label fx:id="lblStatus"
                                style="-fx-text-fill: #43b047; -fx-font-size: 28; -fx-font-weight: bold;"
                                text="Há»¢P Lá»†" />

                            <Label fx:id="lblMatchedPerson"
                                style="-fx-text-fill: #666; -fx-font-size: 14;"
                                text="Nháº­n diá»‡n: Nguyá»…n VÄƒn A" />

                            <Label style="-fx-text-fill: #222; -fx-font-size: 16;"
                                text="KhuÃ´n máº·t cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c xÃ¡c nháº­n vá»›i dá»¯ liá»‡u trong há»‡ thá»‘ng" />

                            <!-- Progress bar -->
                            <VBox spacing="8" alignment="CENTER_LEFT" prefWidth="520">
                                <HBox spacing="8" prefWidth="520">
                                    <Label style="-fx-text-fill: #222; -fx-font-size: 16;" text="Äá»™ khá»›p:" />
                                    <HBox HBox.hgrow="ALWAYS" />
                                    <Label fx:id="lblPercent"
                                        style="-fx-text-fill: #43b047; -fx-font-size: 30; -fx-font-weight: bold;"
                                        text="96.8%" />
                                </HBox>
                                <StackPane prefHeight="14" prefWidth="520"
                                        style="-fx-background-color: #e0eaf7; -fx-background-radius: 7;"
                                        alignment="CENTER_LEFT">
                                    <StackPane fx:id="progressFill" prefWidth="503" prefHeight="14"
                                            style="-fx-background-color: #43b047; -fx-background-radius: 7;"
                                            StackPane.alignment="CENTER_LEFT" />
                                </StackPane>
                            </VBox>
                        </VBox>
                    </StackPane>

                    <!-- Info Card -->
                    <StackPane maxWidth="600"
                            style="-fx-background-color: white; -fx-background-radius: 12;
                                    -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.08), 8, 0, 0, 2);">
                        <VBox alignment="CENTER_LEFT" spacing="16">
                            <padding><Insets bottom="24" left="24" right="24" top="24" /></padding>
                            <Label style="-fx-text-fill: #1976d2; -fx-font-size: 18; -fx-font-weight: bold;"
                                text="ðŸ‘¤ ThÃ´ng Tin TÃ³m Táº¯t" />
                            <HBox spacing="32">
                                <VBox spacing="16" HBox.hgrow="ALWAYS">
                                    <VBox spacing="8">
                                        <Label style="-fx-text-fill: #222; -fx-font-size: 14;" text="MÃ£ sinh viÃªn" />
                                        <Label fx:id="lblStudentId"
                                            style="-fx-font-weight: bold; -fx-font-size: 16;"
                                            text="2021600123" />
                                    </VBox>
                                    <VBox spacing="8">
                                        <Label style="-fx-text-fill: #222; -fx-font-size: 14;" text="Há» vÃ  tÃªn" />
                                        <Label fx:id="lblStudentName"
                                            style="-fx-font-weight: bold; -fx-font-size: 16;"
                                            text="Nguyá»…n VÄƒn A" />
                                    </VBox>
                                </VBox>
                                <VBox spacing="16" HBox.hgrow="ALWAYS">
                                    <VBox spacing="8">
                                        <Label style="-fx-text-fill: #222; -fx-font-size: 14;" text="NgÃ y xÃ¡c thá»±c" />
                                        <Label fx:id="lblDate"
                                            style="-fx-font-weight: bold; -fx-font-size: 16;"
                                            text="15/03/2024" />
                                    </VBox>
                                    <VBox spacing="8">
                                        <Label style="-fx-text-fill: #222; -fx-font-size: 14;" text="Thá»i gian" />
                                        <Label fx:id="lblTime"
                                            style="-fx-font-weight: bold; -fx-font-size: 16;"
                                            text="14:35:22" />
                                    </VBox>
                                </VBox>
                            </HBox>
                        </VBox>
                    </StackPane>

                    <!-- Continue Button -->
                    <HBox alignment="CENTER" spacing="24">
                        <Button onAction="#handleContinueToExam" prefHeight="25.0" prefWidth="597.0"
                                style="-fx-background-color: #1976d2; -fx-text-fill: white;
                                    -fx-font-weight: bold; -fx-background-radius: 8;"
                                text="Tiáº¿p tá»¥c vÃ o phÃ²ng thi">
                            <font><Font size="12.0" /></font>
                        </Button>
                    </HBox>
                </VBox>
            </content>
        </ScrollPane>
        
    </children>
</StackPane>
